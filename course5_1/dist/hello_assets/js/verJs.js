window.VerJs=function(){var e,t,r,n={required:"当前选项不能为空！",min:0,max:0,minlength:0,maxlength:0,rule:"",equal:"",mobile:"请输入有效的手机号码",email:"请输入有效的电子邮箱",idcard:"请输入有效的身份证号码"},a=function(r,a){if(r)for(var u in r){var s=document.getElementsByName(u);[].forEach.call(s,(function(e){for(var t in r[u]){var n=a&&a[u]&&a[u][t]?a[u][t]:_0.messages[t];"min"!=t&&"max"!=t&&"minlength"!=t&&"maxlength"!=t&&"rule"!=t&&"equal"!=t?e.setAttribute("data-"+t,n):"rule"==t?(e.setAttribute("data-rule",r[u][t]),e.setAttribute("data-rule-message",n)):e.setAttribute("data-"+t,r[u][t])}}))}for(var u in n){s=e.querySelectorAll("[data-"+u+"]");[].forEach.call(s,(function(e){var r=e.getAttribute("data-"+u);"true"!=r&&"false"!=r||e.setAttribute("data-"+u,n[u]),e.onblur=i,e.change=i,e.onfocus=o,"keyup"==t&&(e.onkeyup=i)}))}},i=function(e){var t={required:function(){var e=r.value,t=r.getAttribute("data-required");if(""==e||null==e)return u(t,r),!1;return!0},min:a,max:a,minlength:i,maxlength:i,rule:function(){var e=r.value,t=r.getAttribute("data-rule"),n=r.getAttribute("data-rule-message");n||(n="格式错误!");if(t=new RegExp(t),e&&!t.test(e))return u(n,r),!1;return!0},equal:function(){var e=r.value,t=document.querySelector(r.getAttribute("data-equal")).value;if(e!=t)return u("两次输入内容不一致",r),!1;return!0},mobile:function(){var e=r.value,t=r.getAttribute("data-mobile");if(e&&!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(e)&&!/^(0\d{2,3}\d{7,8}|0\d{2,3}-)\d{7,8}$/.test(e))return u(t,r),!1;return!0},email:function(){var e=r.value,t=r.getAttribute("data-email");if(e&&!/^([0-9A-Za-z\-_\.]+)@([0-9a-z]+\.[a-z]{2,3}(\.[a-z]{2})?)$/g.test(e))return u(t,r),!1;return!0},idcard:function(){var e=r.value,t=r.getAttribute("data-idcard");if(e&&!/^([1-9]\d{5}[1]\d{3}(0[1-9]|1[0-2])(0[1-9]|[1-2]\d|3[0-1])\d{3}[0-9xX]|[1-9]\d{5}\d{2}(0[1-9]|1[0-2])(0[1-9]|[1-2]\d|3[0-1])\d{3})$/.test(e))return u(t,r),!1;return!0}},r=e.target?e.target:e;for(var n in t)r.getAttribute("data-"+n)&&t[n]();function a(){var e=r.value,t=parseInt(r.getAttribute("data-min")),n=parseInt(r.getAttribute("data-max"));if(e=parseInt(e)){if(isNaN(e)||t>e)return u("最小值为："+t,r),!1;if(!isNaN(n)&&n<e)return u("最大值为："+n,r),!1}return!0}function i(){var e=r.value.length,t=parseInt(r.getAttribute("data-maxlength")),n=parseInt(r.getAttribute("data-minlength"));return e<n?(u("最少输入"+n+"个字符",r),!1):!(e>t)||(u("最多输入"+t+"个字符",r),!1)}},u=function(e,t){o(t);var r=t.getAttribute("data-block");t.classList.add("ver-error-input");var n=document.createElement("span");if(r)n.className="ver-errors ver-errorMessageBlock";else{var a=document.createElement("i");a.className="verJsFont ver-icon-carets ver-error-caret",n.appendChild(a),n.className="ver-errors"}var i=document.createElement("i");i.className="verJsFont icon-info-o",n.appendChild(i);var u=document.createElement("span");(u.innerText=e,n.appendChild(u),p(n,t),t.getAttribute("data-icon-color"))&&t.offsetParent.querySelector("iconcirle").classList.add("ver-error-inputs")},o=function(e){if(e.target)var t=e.target;else t=e;var r,n="";(r=t.parentElement)&&((n=r.querySelector(".ver-errors"))&&r.removeChild(n),t.classList.remove("ver-error-input"),t.getAttribute("data-icon-color")&&(r=t.offsetParent).querySelector("iconcirle").classList.remove("ver-error-inputs"))},s=function(){return d(),e.querySelectorAll(".ver-error-input").length>0?(e.querySelector(".ver-error-input").focus(),!1):"ajax"!==e.getAttribute("data-form")||(c(),!1)},c=function(){e.getAttribute("data-form");var t=new XMLHttpRequest;t.open("POST",e.action,!0),t.setRequestHeader("x-requested-with","XMLHttpRequest");var r=new FormData(e);t.onreadystatechange=function(){if(4===t.readyState){if(203===t.status)return!1;200===t.status||304===t.status?f(t.responseText):m(t.responseText)}},t.send(r)},l=function(){for(var t in e.reset(),n){var r=e.querySelectorAll("[data-"+t+"]");r.length>0&&[].forEach.call(r,(function(e){o(e)}))}},d=function(){for(var t in n){var r=e.querySelectorAll("[data-"+t+"]");r.length>0&&[].forEach.call(r,(function(e){i(e)}))}},f=function(e){console.log(e)},m=function(e,t){console.log(t)},v=((r=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,r=t.length-1,n=r;n>0;n--)if("interactive"===t[n].readyState){e=t[n].src;break}return e||t[r].src}()).substring(0,r.lastIndexOf("/")+1),function(){var e=document.createElement("link"),t=document.createElement("link");e.href="../css/vercommon.css",t.href="../css/vericon.css",e.rel=t.rel="stylesheet",e.type=t.type="text/css";var r=document.getElementsByTagName("head")[0];r.appendChild(e),r.appendChild(t)}),g=function(){var e,t=navigator.userAgent.toLowerCase();return t.indexOf("msie")>-1&&(e=t.match(/msie ([\d.]+)/)[1]),!(e<=8)},p=function(e,t){var r=t.parentNode;r.lastChild==t?r.appendChild(e):r.insertBefore(e,t.nextSibling)};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var r,n;if(null==this)throw new TypeError(" this is null or not defined");var a=Object(this),i=a.length>>>0;if("[object Function]"!={}.toString.call(e))throw new TypeError(e+" is not a function");for(t&&(r=t),n=0;n<i;){var u;n in a&&(u=a[n],e.call(r,u,n,a)),n++}}),"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e=this;function t(t){return function(r){var n=e.className.split(/\s+/g),a=n.indexOf(r);t(n,a,r),e.className=n.join(" ")}}return{add:t((function(e,t,r){~t||e.push(r)})),remove:t((function(e,t){~t&&e.splice(t,1)})),toggle:t((function(e,t,r){~t?e.splice(t,1):e.push(r)})),contains:function(t){return!!~e.className.split(/\s+/g).indexOf(t)},item:function(t){return e.className.split(/\s+/g)[t]||null}}}});return function(r){if(!g())return m((function(e){alert(e)}),"不支持的浏览器插件"),!1;v();var n=r.form?r.form:"form";e=document.querySelector(n),r.success&&(f=r.success),r.fail&&(m=r.fail),t=r.change?r.change:"default",a(r.data,r.message),e.onsubmit=s,e.onreset=l}}();